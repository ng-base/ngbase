import{$ as _,Ab as Y,Ac as y,Bc as Z,Ca as N,Fc as tt,Ia as T,Ic as et,J as $,Ja as x,K as w,Ka as h,Kb as B,La as u,Lc as ot,Nb as z,P as A,Qa as U,V as m,Wa as W,Z as R,Za as H,_a as V,bb as P,bc as d,db as j,dc as G,h as D,ha as M,hc as J,ia as I,ib as O,jb as E,nb as Q,o as S,ob as q,qa as F,rb as L,sb as k,u as b,wc as K,xc as X,zb as v,zc as g}from"./chunk-HOYDBZWU.js";function it(s){let l=ot("popover",s);function e(o,r,a){let{diaRef:n,parent:p,replace:c}=l.open(o,(f,lt)=>{let C=f.instance;C.setOptions(lt),C.tooltipOptions=r},a);return{diaRef:n,events:p.instance.events,parent:p.instance,replace:c}}function t(){l.closeAll()}return{open:e,closeAll:t}}var pt=["myDialog"],ct=["container"],ht=["backdropElement"],dt=(s,i)=>[s,i];function mt(s,i){if(s&1){let l=q();O(0,"div",5,2),L("click",function(){M(l);let t=k();return I(!t.options.disableClose&&t.close())}),E()}if(s&2){let l=k();P(l.tooltipOptions.backdropClassName),V("clip-path",l.tooltipOptions.clipPath==null?null:l.tooltipOptions.clipPath())}}var nt=(()=>{let i=class i extends tt{constructor(){super(),this.myDialog=u("myDialog",{read:x}),this.container=u("container"),this.backdropElement=u("backdropElement"),this.document=m(J),this.lastPosition="top",this.scrolled=h(0),this.events=this._afterViewSource.pipe(w(e=>{let t=this.container().nativeElement,o=b(t,"mouseenter"),r=b(t,"mouseleave"),a=o.pipe(w(n=>r.pipe(S(p=>({type:"mouseleave",value:p})),$({type:"mouseenter",value:n}))));return e?a:D})),this.scheduleUpdateDimension=()=>{requestAnimationFrame(()=>this.updateDimension())},T(()=>{this._afterViewSource.next(this.myDialog())}),G(()=>{let e=this.container().nativeElement,t=this.target()||this.tooltipOptions.target;this.tooltipOptions.anchor&&(this.tooltipOptions.offset=16),this.lastPosition=this.tooltipOptions.position||"bottom",this.tooltipOptions.smoothScroll?ft(t).then(()=>{this.scrolled.update(o=>o+1),this.schedulePopoverUpdate(t,e)}):this.schedulePopoverUpdate(t,e)})}schedulePopoverUpdate(e,t){this.tooltipOptions.target=e,this.options.backdrop&&(this.document.body.style.overflow="hidden"),this.options.width==="target"?t.style.width=`${e.offsetWidth}px`:this.options.width&&(t.style.width=this.options.width),this.options.height&&(t.style.height=this.options.height),this.options.maxHeight&&(t.style.maxHeight=this.options.maxHeight),this.scheduleUpdateDimension(),this.options.backdrop||window.addEventListener("wheel",this.scheduleUpdateDimension)}updateDimension(){let e=this.container().nativeElement,t=this.tooltipOptions.target,{top:o,left:r,bottom:a,position:n}=et({target:t,el:e,position:this.lastPosition,client:this.tooltipOptions.client,offset:this.tooltipOptions.offset});this.tooltipOptions.anchor&&this.updateAnchorPosition(n,e,t),this.lastPosition=n,a?(e.style.bottom=`${a}px`,e.style.top=""):o&&(e.style.top=`${o}px`,e.style.bottom=""),e.style.left=`${r}px`}updateAnchorPosition(e,t,o){let r="0deg",a="50%",n="50%",c=o.offsetHeight/2,f=o.offsetWidth/2;switch(e){case"top":case"tl":case"tr":a="100%";break;case"left":r="270deg",n=`calc(100% + ${16/2}px)`,a=c>t.clientHeight?"50%":`calc(${c}px)`;break;case"right":r="90deg",n=`-${16/2}px`,a=c>t.clientHeight?"50%":`calc(${c}px)`;break;case"bottom":case"bl":case"br":r="180deg",a="-1rem",n=f>t.clientWidth?"50%":`calc(100% - ${f}px)`;break}t.style.setProperty("--action-angle",r),t.style.setProperty("--action-left",n),t.style.setProperty("--action-top",a)}setOptions(e){this.options=e}ngOnDestroy(){window.removeEventListener("wheel",this.scheduleUpdateDimension),this.document.body.style.overflow=""}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=R({type:i,selectors:[["mee-popover"]],viewQuery:function(t,o){t&1&&(v(o.myDialog,pt,5,x),v(o.container,ct,5),v(o.backdropElement,ht,5)),t&2&&Y(3)},hostAttrs:[1,"fixed","top-0","left-0","w-full","h-full","pointer-events-none"],standalone:!0,features:[U,B],decls:5,vars:7,consts:[["container",""],["myDialog",""],["backdropElement",""],[1,"menu-container","pointer-events-auto","fixed","z-10","rounded-base","border","border-border","bg-foreground","p-1","shadow-md"],[1,"pointer-events-auto","fixed","top-0","h-full","w-full",3,"clipPath","class"],[1,"pointer-events-auto","fixed","top-0","h-full","w-full",3,"click"]],template:function(t,o){t&1&&(O(0,"div",3,0),Q(2,null,1),E(),W(4,mt,2,4,"div",4)),t&2&&(P(z(4,dt,o.tooltipOptions.anchor?"popover-anchor":"overflow-auto",o.tooltipOptions.className)),H("@slideInOutAnimation",1),N(4),j(o.options.backdrop?4:-1))},styles:['.popover-anchor[_ngcontent-%COMP%]{--action-angle: 180deg;--action-left: 50%;--action-top: -1rem}.popover-anchor[_ngcontent-%COMP%]:before{content:"";position:absolute;width:0;height:0;border-style:solid;border-top:1rem solid;--tw-border-opacity: 1;border-color:rgba(var(--foreground),var(--tw-border-opacity));border-left:1rem solid transparent;border-right:1rem solid transparent;top:var(--action-top);left:var(--action-left);transform:translate(-50%) rotate(var(--action-angle, 180deg))}'],data:{animation:[K("slideInOutAnimation",[y("1",g({transform:"none",opacity:1})),y("void",g({transform:"translateY(-20px)",opacity:0})),y("0",g({transform:"translateY(-20px)",opacity:0})),Z("* => *",X("100ms ease-out"))])]},changeDetection:0});let s=i;return s})();function ft(s){return new Promise((i,l)=>{let e,t=null,o=0,r=()=>{if(t=window.pageYOffset||document.documentElement.scrollTop,e!==null&&t===e){if(o++,o>2){i(!0);return}}else o=0,e=t;requestAnimationFrame(r)};s.scrollIntoView({behavior:"smooth",block:"nearest"}),requestAnimationFrame(r)})}function rt(){let s=it(nt);function i(l,e,t){return s.open(l,e,t)}return{open:i,closeAll:s.closeAll}}var at=(()=>{let i=class i{constructor(){this.popover=rt(),this.steps=h([]),this.step=h(-1),this.id=0,this.showPrev=d(()=>this.step()>0),this.showNext=d(()=>this.step()<this.steps().length-1),this.isLast=d(()=>this.step()===this.steps().length-1),this.totalSteps=d(()=>this.steps().length),this.scrolled=h(0),this.clipPath=d(()=>{let e=this.step(),t=this.scrolled(),o=this.steps()[e],{width:r,height:a,top:n,left:p}=o.el.nativeElement.getBoundingClientRect();return`polygon(
      0 0,
      100% 0,
      100% ${n}px,
      ${p}px ${n}px,
      ${p}px ${n+a}px,
      ${p+r}px ${n+a}px,
      ${p+r}px ${n}px,
      100% ${n}px,
      100% 100%,
      0 100%,
      0 0
    )`})}addStep(e){this.steps.update(t=>[...t,e])}start(e){this.template=e,this.step.set(-1),this.next()}prev(){let e=this.steps(),t=this.step();if(e.length){let o=(t-1+e.length)%e.length;this.go(o)}}next(){let e=this.steps(),t=this.step();if(e.length){let o=(t+1)%e.length;if(t>o){console.log("next",o),this.stop();return}this.go(o)}}go(e){let t=this.steps();if(t.length){if(e<0||e>=t.length)return;this.step.set(e),this.diaRef?this.diaRef.parent.target.set(t[e].el.nativeElement):this.showOverlay(t[e].el.nativeElement)}}stop(){this.hideOverlay(),clearInterval(this.id)}showOverlay(e){this.diaRef?.diaRef.close(),this.diaRef=this.popover.open(this.template,{target:e,position:"right",className:"transition-all",backdropClassName:"bg-black/20",clipPath:this.clipPath,smoothScroll:!0,anchor:!0},{backdropColor:!0,width:"400px",disableClose:!0}),this.scrolled=this.diaRef.parent.scrolled}hideOverlay(){this.diaRef?.diaRef.close(),this.diaRef=void 0}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var Ft=(()=>{let i=class i{constructor(){this.el=m(F),this.tourService=m(at),this.tourService.addStep(this)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=_({type:i,selectors:[["","meeTourStep",""]],standalone:!0});let s=i;return s})();export{it as a,nt as b,rt as c,at as d,Ft as e};
